## Technical Quality Reviewer によるレビュー結果

### 1. 判定 (Decision)

- **Status**: Approve

**判定基準:** P0 が1件以上存在する場合は Request Changes とする。P0 が0件の場合は Approve とする。

### 2. 良い点 (Strengths)

- **5.2.5 ハッシュ伝播の全経路カバー**: RootSearch、Pvs、パス処理、MPC 浅い探索、OptimizeMoveOrder の全箇所について具体的なコード例が示されており、ハッシュ値の管理漏れリスクが大幅に低減されている。
- **5.4.4 保存・復元方式の具体化**: `PatternIndexChange` 構造体と固定サイズバッファによる差分記録方式が具体的に設計されており、MakeMove/UnmakeMove のホットパス上でのアロケーション回避が保証されている。
- **7.3 デバッグビルド限定カウンタ**: 各最適化の個別効果を定量的に評価するためのカウンタが 5 種類定義されており、パフォーマンスチューニング時の可視性が確保されている。
- **5.4.2 3 進数重み計算の仮定明記**: `ConvertToTernaryIndex` の MSB 側からの計算方式と逆引きテーブルの `TernaryWeight` の整合性について仮定が明記されており、実装時の検証ポイントが明確になった。
- **7.2 ベンチマーク条件の具体化**: 計測方法が標準化されており、各ステップの成果物欄がベンチマーク条件への参照に更新されている。

### 3. 指摘事項 (Issues)

#### Severity 定義

| Severity | 名称 | 定義 | Author の対応 |
| :--- | :--- | :--- | :--- |
| **P0 (Blocker)** | 修正必須 | 論理的欠陥、仕様漏れ、重大なリスク、回答必須の質問 | 必ず対応 |
| **P1 (Improvement)** | 具体的改善 | 修正内容と期待効果が明確な具体的改善提案 | 原則対応 |
| **P2 (Note)** | 記録のみ | 代替案の提示、将来的な懸念、参考情報 | 対応不要 |

#### 指摘一覧

**P0**: 該当なし

**[P1-1] Pvs メソッド内の Null Window Search 再探索時のハッシュ管理フローが曖昧**
- **対象セクション**: 5.2.5 Pvs メソッド内でのハッシュ管理
- **内容**: コード例内のコメント「Null Window Search の再探索でも childHash を再利用（同一の子ノードのため）」は意図を示しているが、Null Window Search の再探索（Re-search）フローでは UnmakeMove → 再度 MakeMove が実行されるか、それとも UnmakeMove せずにフルウィンドウで再探索するかにより、`childHash` の扱いが異なる。現行の Phase 2 実装では「同一の子ノードに対して異なるウィンドウで再探索する」設計であるため、`childHash` は再利用可能であるはずだが、その根拠となる探索フロー（MakeMove は 1 回のみ実行し、Pvs を異なるウィンドウで再度呼ぶ）が明示されていない。
- **修正の期待値**: Null Window Search の再探索フローにおいて、MakeMove が 1 回のみ実行される（UnmakeMove → MakeMove を繰り返さない）ため `childHash` を再利用できることを、コード例のコメントまたは設計文書に補足する。
