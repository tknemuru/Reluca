## Approach Reviewer によるレビュー結果

### 1. 判定 (Decision)

- **Status**: Approve

**判定基準:** P0 が1件以上存在する場合は Request Changes とする。P0 が0件の場合は Approve とする。

### 2. 良い点 (Strengths)

- **背景・動機**: 後続 RFC（Multi-ProbCut、Aspiration Window チューニング、時間制御）の前提となる計測基盤であるという位置付けが明確であり、本 RFC の必然性が十分に説明されている。
- **カウント方針**: `Pvs()` メソッド先頭の 1 箇所のみでインクリメントする方針は、TT ヒット・パスノード・葉ノードの各ケースを網羅的に検討しており、カウント定義の一貫性が高い。
- **代替案の検討**: ノードカウント方式（案A/B）とログ出力方式（案C/D/E）の両軸で代替案を検討し、YAGNI 原則に基づく選定理由が論理的に記載されている。
- **Non-Goals**: Logger クラスの導入を明確に Non-Goals とし、横断的関心事を本 RFC のスコープから分離した判断は適切である。
- **後方互換性**: コンストラクタのデフォルト値により `LegacySearchEngine` 側の変更が不要となる設計は、変更影響を最小化しており妥当である。

### 3. 指摘事項 (Issues)

#### Severity 定義

| Severity | 定義 |
| :--- | :--- |
| **P0 (Blocker)** | 修正必須。論理的欠陥、仕様漏れ、重大なリスク、回答必須の質問 |
| **P1 (Nit)** | 提案。より良い手法、軽微な懸念、参考情報 |

#### 指摘一覧

**P0**: 該当なし

**[P1-1] RootSearch 内の合法手 0 件時に NodesSearched = 0 となりうる点の明文化**
- **対象セクション**: 5.2 PvsSearchEngine へのカウンタ導入（カウント方針 - 仮定）
- **内容**: `RootSearch()` で合法手が 0 の場合、`Evaluate(context)` を直接呼び出して `SearchResult(-1, Evaluate(context))` を返却する。この経路は `Pvs()` を経由しないため、反復深化のある深さで当該分岐に入ると `_nodesSearched = 0` のまま累積される。仮定セクションでは「カウント対象外」と述べているが、結果として `NodesSearched = 0` の `SearchResult` が返却されうることを明記していない。
- **修正の期待値**: 5.2 の仮定セクションに「`RootSearch()` で合法手 0 の場合は当該深さの NodesSearched が 0 となる」旨を補足し、利用者の混乱を防ぐ。

**[P1-2] Aspiration retry 回数のログ出力の検討**
- **対象セクション**: 5.3 探索ログの出力
- **内容**: Aspiration retry + 確定探索により `nodes` フィールドに retry 分のノード数が累積されるが、ログフォーマットには retry 回数が含まれない。特定の深さで `nodes` が急増した場合に retry が原因であると判断する手がかりがなく、後続 RFC でのパラメータ調整時にログ解釈が困難になる可能性がある。
- **修正の期待値**: 5.3 のログフォーマットに retry 回数の追加を検討するか、本 RFC のスコープ外とする場合はその旨を明記する。

**[P1-3] Goals の「TT ON/OFF で差分が確認できること」の方向性明記**
- **対象セクション**: 3. 目的とスコープ (Goals)
- **内容**: 「TT ON/OFF で NodesSearched の差分が確認できること」は定性的な記述であり、差分の方向（増減どちら）が Goals 自体には明記されていない。テスト戦略（セクション 8）では「TT ON 時に減少」と記載されており整合はしているが、Goals 単体での検証基準が曖昧である。
- **修正の期待値**: Goals の該当項目を「TT ON 時に NodesSearched が TT OFF 時より減少することを確認できること」のように方向性を含めた表現に修正する。
